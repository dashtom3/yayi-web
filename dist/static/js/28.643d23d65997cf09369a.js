webpackJsonp([28],{355:function(e,a,s){function l(e){s(672)}var t=s(4)(s(470),s(794),l,null,null);e.exports=t.exports},470:function(e,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default={data:function(){return{ruleForm:{upClass:[],classname:"",oldClassname:"",itemId:null,itemClassifyGrade:null},searchClassfyName:"",searchParentClassfyName:"",PreviousClassify:"",classfyOperaType:1,classfyChangeIndex:null,options:[],dialogFormVisible:!1,formLabelWidth:"120px",bindTitle:null,tableData:[],rules:{upClass:[{type:"array",required:!0,message:"请选择上级分类",trigger:"blur"}],classname:[{required:!0,message:"请输入分类名称",trigger:"blur"}]},a:[],addNew:!0}},watch:{},components:{},created:function(){var e=this;e.getClassify(),e.getAllClassify()},methods:{getClassify:function(){var e=this;e.global.axiosGetReq("/item/showItemClassify").then(function(a){"SUCCEED"===a.data.callStatus?e.tableData=a.data.data:e.$message.error("网络出错，请稍后再试！")})},getAllClassify:function(){var e=this;e.global.axiosGetReq("/item/getAllClassifyAndBrand").then(function(a){if("SUCCEED"===a.data.callStatus){e.options=a.data.data.classifyList;for(var s=0;s<e.options.length;s++){e.options[s].label=e.options[s].oneClassify,e.options[s].children=e.options[s].classifyTwoList;for(var l in e.options[s].children)e.options[s].children[l].label=e.options[s].children[l].classifyTwoName}var t=[{label:"根节点",children:[]}];t[0].children=e.options,e.options=t}else e.$message.error("网络出错，请稍后再试！")})},addClassfy:function(){var e=this;e.bindTitle="添加商品分类",e.dialogFormVisible=!0,e.addNew=!0},search:function(){var e=this,a={itemClassifyName:e.searchClassfyName,itemPreviousClassify:e.searchParentClassfyName};e.global.axiosPostReq("/item/showItemClassify",a).then(function(a){"SUCCEED"===a.data.callStatus?(e.tableData=a.data.data,console.log(e.tableData,"23232323")):e.$message.error("网络出错，请稍后再试！")})},DELEONE:function(e){var a=this;a.$confirm("确定删除该属性吗, 是否继续?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var s={itemClassifyId:e.row.itemClassifyId,itemClassifyName:e.row.itemClassifyName,itemClassifyGrade:e.row.itemClassifyGrade};console.log(s,"23232"),a.global.axiosPostReq("/item/deleteItemClassify",s).then(function(e){"SUCCEED"===e.data.callStatus?(a.getClassify(),a.getAllClassify(),a.$message({type:"success",message:"删除成功!"})):a.$message.error("网络出错，请稍后再试！")})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},changeOneAttr:function(e){var a=this;console.log(e.row),a.bindTitle="修改商品分类",a.dialogFormVisible=!0,a.PreviousClassify=e.row.itemPreviousClassify,a.ruleForm.classname=e.row.itemClassifyName,a.ruleForm.oldClassname=e.row.itemClassifyName,a.ruleForm.itemId=e.row.itemClassifyId,a.ruleForm.itemClassifyGrade=e.row.itemClassifyGrade,a.addNew=!1},saveOneAttrs:function(e){var a=this;a.$refs[e].validate(function(e){if(!e)return!1;if("添加商品分类"==a.bindTitle){var s={itemClassifyName:a.ruleForm.classname,itemPreviousClassify:a.ruleForm.upClass.slice(-1)[0],itemClassifyGrade:a.ruleForm.upClass.length};a.global.axiosPostReq("/item/addItemClassify",s).then(function(e){"SUCCEED"===e.data.callStatus?(a.getClassify(),a.getAllClassify(),a.ruleForm.classname="",a.ruleForm.upClass=[],a.dialogFormVisible=!1,a.$message({type:"success",message:"添加成功!"}),a.tableData=e.data.data):a.$message.error("网络出错，请稍后再试！")})}else{var s={itemClassifyId:a.ruleForm.itemId,itemClassifyName:a.ruleForm.classname,itemOldName:a.ruleForm.oldClassname,itemClassifyGrade:a.ruleForm.itemClassifyGrade};console.log(a.ruleForm,"22222222"),a.global.axiosPostReq("/item/updateItemClassify",s).then(function(e){"SUCCEED"===e.data.callStatus?(a.getClassify(),a.getAllClassify(),a.ruleForm.classname="",a.ruleForm.upClass=[],a.ruleForm.itemId=null,a.ruleForm.itemClassifyGrade=null,a.dialogFormVisible=!1,a.$message({type:"success",message:"修改成功!"}),a.tableData=e.data.data):a.$message.error("网络出错，请稍后再试！")})}})},handleClose:function(){var e=this;e.ruleForm.classname="",e.ruleForm.upClass=[],e.ruleForm.itemId=null,e.ruleForm.itemClassifyGrade=null,e.dialogFormVisible=!1}}}},545:function(e,a,s){a=e.exports=s(347)(!0),a.push([e.i,".classfy .el-dialog__footer{margin-left:120px;text-align:left}.cascader{width:260px}","",{version:3,sources:["/Users/daifeili/yayi-web/src/components/admin/bsseInfoManner/classfy.vue"],names:[],mappings:"AACA,4BACE,kBAAmB,AACnB,eAAiB,CAClB,AACD,UACE,WAAa,CACd",file:"classfy.vue",sourcesContent:["\n.classfy  .el-dialog__footer{\n  margin-left: 120px;\n  text-align: left;\n}\n.cascader {\n  width: 260px;\n}\n"],sourceRoot:""}])},672:function(e,a,s){var l=s(545);"string"==typeof l&&(l=[[e.i,l,""]]),l.locals&&(e.exports=l.locals);s(348)("ebc4ed1a",l,!0)},794:function(e,a){e.exports={render:function(){var e=this,a=e.$createElement,s=e._self._c||a;return s("el-row",{staticClass:"warp classfy"},[s("el-col",{staticClass:"warp-breadcrum",attrs:{span:24}},[s("el-breadcrumb",{attrs:{separator:"/"}},[s("el-breadcrumb-item",[s("b",[e._v("商品基础资料管理")])]),e._v(" "),s("el-breadcrumb-item",[e._v("商品分类管理")])],1)],1),e._v(" "),s("el-col",{staticClass:"warp-main",attrs:{span:24}},[s("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"}},[s("el-form",{attrs:{inline:!0}},[s("el-form-item",{attrs:{label:"分类名称："}},[s("el-input",{model:{value:e.searchClassfyName,callback:function(a){e.searchClassfyName=a},expression:"searchClassfyName"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"上级分类："}},[s("el-input",{model:{value:e.searchParentClassfyName,callback:function(a){e.searchParentClassfyName=a},expression:"searchParentClassfyName"}})],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:function(a){e.search()}}},[e._v("查询")])],1)],1)],1),e._v(" "),s("el-col",{staticStyle:{"text-align":"right","line-height":"40px"}},[s("el-button",{attrs:{type:"text"},on:{click:function(a){e.addClassfy()}}},[e._v("+添加商品分类")])],1),e._v(" "),s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[s("el-table-column",{attrs:{prop:"itemClassifyName",align:"center",label:"分类名称"}}),e._v(" "),s("el-table-column",{attrs:{prop:"itemPreviousClassify",align:"center",label:"上级分类"}}),e._v(" "),s("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[s("el-button",{attrs:{type:"text"},on:{click:function(s){e.changeOneAttr(a)}}},[e._v("修改")]),e._v(" "),s("el-button",{attrs:{type:"text"},on:{click:function(s){e.DELEONE(a)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),s("el-dialog",{attrs:{title:e.bindTitle,visible:e.dialogFormVisible,"before-close":e.handleClose},on:{"update:visible":function(a){e.dialogFormVisible=a}}},[s("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules}},[e.addNew?s("el-form-item",{attrs:{label:"上级分类：",prop:"upClass","label-width":e.formLabelWidth}},[s("el-cascader",{staticClass:"cascader",attrs:{props:{value:"label"},options:e.options,"show-all-levels":!1,"change-on-select":""},model:{value:e.ruleForm.upClass,callback:function(a){e.ruleForm.upClass=a},expression:"ruleForm.upClass"}},[s("el-button",{attrs:{icon:"search"},slot:"append"})],1)],1):s("el-form-item",{attrs:{label:"上级分类：","label-width":e.formLabelWidth}},[s("p",[e._v(e._s(e.PreviousClassify))])]),e._v(" "),s("el-form-item",{attrs:{label:"分类名称：",prop:"classname","label-width":e.formLabelWidth}},[s("el-input",{attrs:{"auto-complete":"off"},model:{value:e.ruleForm.classname,callback:function(a){e.ruleForm.classname=a},expression:"ruleForm.classname"}})],1),e._v(" "),s("el-form-item",{staticStyle:{"text-align":"right"}},[s("el-button",{attrs:{type:"primary"},on:{click:function(a){e.saveOneAttrs("ruleForm")}}},[e._v("保存")])],1)],1)],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=28.643d23d65997cf09369a.js.map