webpackJsonp([17],{372:function(i,t,a){function e(i){a(731)}var s=a(4)(a(489),a(842),e,"data-v-eafc63a8",null);i.exports=s.exports},489:function(i,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=a(34);t.default={data:function(){return{videoList:[],qiNiuToken:null,qiNiuUrl:e.a.qiNiuUrl,videoVisible:!1,radio:"1",viId:"",input_video:"",video_link:"",isEdit:!1,fileList:[]}},created:function(){var i=this;e.a.axiosGetReq("/file/getUpToken",null).then(function(t){"SUCCEED"===t.data.callStatus&&(i.qiNiuToken={token:t.data.msg})}),this.queryHandler()},computed:{ifPlaceHolder:function(){return"1"===this.radio?this.ifPlaceHolder="":this.ifPlaceHolder="请输入视频地址"}},methods:{queryHandler:function(){var i=this;e.a.axiosPostReq("/vid/showVid",{}).then(function(t){"SUCCEED"===t.data.callStatus?i.videoList=t.data.data:i.$message.error("查询失败！")})},videoAddHandler:function(){this.videoVisible=!0,this.isEdit=!1,this.input_video="",this.video_link="",this.fileList=[]},uploadFile:function(i,t){this.video_link=e.a.qiniuShUrl+t.response.key,this.fileList=[],this.fileList.push({name:this.video_link,url:this.video_link})},cancelVideo:function(){this.videoVisible=!1},validate:function(){return this.input_video?this.video_link?void 0:(this.$message.error("请完成视频上传！"),!1):(this.$message.error("请填写视频名称！"),!1)},saveVideo:function(){var i=this;if(this.isEdit){var t={viId:this.viId,vidName:this.input_video,vidType:this.radio,vidRoute:this.video_link};this.validate(),e.a.axiosPostReq("/vid/updateVid",t).then(function(t){"SUCCEED"===t.data.callStatus?(i.$message({message:"修改成功",type:"success"}),i.fileList=[],i.videoVisible=!1,i.queryHandler()):i.$message.error("修改失败！")})}else{var a={vidName:this.input_video,videoType:this.radio,vidRoute:this.video_link};this.validate(),e.a.axiosPostReq("/vid/insertVid",a).then(function(t){"SUCCEED"===t.data.callStatus?(i.$message({message:"添加成功",type:"success"}),i.fileList=[],i.videoVisible=!1,i.queryHandler()):i.$message.error("添加失败！")})}},handleEdit:function(i,t){this.videoVisible=!0,this.isEdit=!0,this.input_video=t.vidName,this.radio=t.videoType,this.video_link=t.vidRoute,this.viId=t.viId},handleDel:function(i,t){var a=this;this.$confirm("确定删除吗？").then(function(i){var s={viId:t.viId};e.a.axiosPostReq("/vid/deleteVid",s).then(function(i){"SUCCEED"===i.data.callStatus?(a.$message({message:"删除成功",type:"success"}),a.queryHandler()):a.$message.error("删除失败！")})}).catch(function(i){})}}}},604:function(i,t,a){t=i.exports=a(347)(!0),t.push([i.i,'.fl[data-v-eafc63a8]{float:left}.fr[data-v-eafc63a8]{float:right}.clearfix[data-v-eafc63a8]{zoom:1}.clearfix[data-v-eafc63a8]:after{content:"";clear:both;display:block}.i_col_red[data-v-eafc63a8]{color:red;font-style:normal}.video_wrap li[data-v-eafc63a8]{height:40px;line-height:40px}.span_nav[data-v-eafc63a8]{display:inline-block;width:84px;padding-right:6px}.btn_[data-v-eafc63a8]{width:80px;margin-left:92px}.add_btn[data-v-eafc63a8]{float:right;margin:20px 118px 20px 0}',"",{version:3,sources:["/Users/daifeili/yayi-web/src/components/admin/videoManner/video.vue"],names:[],mappings:"AACA,qBACC,UAAW,CACX,AACD,qBACC,WAAY,CACZ,AACD,2BACC,MAAO,CACP,AACD,iCACC,WAAW,AACX,WAAW,AACX,aAAc,CACd,AACD,4BACE,UAAW,AACX,iBAAmB,CACpB,AACD,gCACC,YAAa,AACb,gBAAkB,CAClB,AACD,2BACC,qBAAsB,AACtB,WAAY,AACZ,iBAAmB,CACnB,AACD,uBACC,WAAY,AACX,gBAAkB,CACnB,AACD,0BACC,YAAY,AACZ,wBAA0B,CAC1B",file:"video.vue",sourcesContent:['\n.fl[data-v-eafc63a8]{\n\tfloat:left;\n}\n.fr[data-v-eafc63a8]{\n\tfloat:right;\n}\n.clearfix[data-v-eafc63a8]{\n\tzoom:1;\n}\n.clearfix[data-v-eafc63a8]:after{\n\tcontent:"";\n\tclear:both;\n\tdisplay:block;\n}\n.i_col_red[data-v-eafc63a8]{\n  color: red;\n  font-style: normal;\n}\n.video_wrap li[data-v-eafc63a8]{\n\theight: 40px;\n\tline-height: 40px;\n}\n.span_nav[data-v-eafc63a8]{\n\tdisplay: inline-block;\n\twidth: 84px;\n\tpadding-right: 6px;\n}\n.btn_[data-v-eafc63a8]{\n\twidth: 80px;\n  margin-left: 92px;\n}\n.add_btn[data-v-eafc63a8]{\n\tfloat:right;\n\tmargin: 20px 118px 20px 0;\n}\n'],sourceRoot:""}])},731:function(i,t,a){var e=a(604);"string"==typeof e&&(e=[[i.i,e,""]]),e.locals&&(i.exports=e.locals);a(348)("782be73a",e,!0)},842:function(i,t){i.exports={render:function(){var i=this,t=i.$createElement,a=i._self._c||t;return a("el-row",{staticClass:"warp"},[a("el-col",{staticClass:"warp-breadcrum",attrs:{span:24}},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("b",[i._v("视频管理")])])],1)],1),i._v(" "),a("el-button",{staticClass:"add_btn",attrs:{type:"primary"},on:{click:i.videoAddHandler}},[i._v("+添加视频")]),i._v(" "),a("el-table",{attrs:{data:i.videoList,border:""}},[a("el-table-column",{attrs:{prop:"vidName",label:"视频",span:8,align:"center"}}),i._v(" "),a("el-table-column",{attrs:{prop:"vidRoute",label:"链接",span:8,align:"center"}}),i._v(" "),a("el-table-column",{attrs:{prop:"handle",label:"操作",span:8,align:"center"},scopedSlots:i._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small",type:"info"},on:{click:function(a){i.handleEdit(t.$index,t.row)}}},[i._v("修改")]),i._v(" "),a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){i.handleDel(t.$index,t.row)}}},[i._v("删除")])]}}])})],1),i._v(" "),a("el-dialog",{attrs:{title:i.isEdit?"修改视频":"添加视频",size:"tiny","close-on-click-modal":!0},model:{value:i.videoVisible,callback:function(t){i.videoVisible=t},expression:"videoVisible"}},[a("ul",{staticClass:"video_wrap"},[a("li",{staticClass:"clearfix"},[a("span",{staticClass:"fl span_nav"},[a("span",{staticClass:"fr"},[a("i",{staticClass:"i_col_red"},[i._v("*")]),i._v("视频名称：")])]),i._v(" "),a("el-input",{staticClass:"fl",staticStyle:{width:"200px"},model:{value:i.input_video,callback:function(t){i.input_video=t},expression:"input_video"}})],1),i._v(" "),a("li",{staticClass:"clearfix"},[a("span",{staticClass:"fl span_nav"},[a("span",{staticClass:"fr"},[a("i",{staticClass:"i_col_red"},[i._v("*")]),i._v("上传方式：")])]),i._v(" "),a("el-radio",{staticClass:"radio",attrs:{label:"1"},model:{value:i.radio,callback:function(t){i.radio=t},expression:"radio"}},[i._v("本地上传")]),i._v(" "),a("el-radio",{staticClass:"radio",attrs:{label:"2"},model:{value:i.radio,callback:function(t){i.radio=t},expression:"radio"}},[i._v("输入外部视频网址")])],1),i._v(" "),a("li",{staticClass:"clearfix",staticStyle:{"padding-left":"92px","padding-bottom":"20px"}},[a("el-input",{staticClass:"fl",staticStyle:{width:"200px","padding-right":"20px"},attrs:{placeholder:i.ifPlaceHolder},model:{value:i.video_link,callback:function(t){i.video_link=t},expression:"video_link"}}),i._v(" "),a("el-upload",{staticClass:"upload-demo",attrs:{action:i.qiNiuUrl,"on-success":i.uploadFile,data:i.qiNiuToken,"file-list":i.fileList}},["1"===i.radio?a("el-button",{attrs:{type:"primary"},slot:"trigger"},[i._v("选择")]):i._e()],1)],1)]),i._v(" "),a("div",{staticStyle:{"margin-top":"30px"}},[a("el-button",{staticClass:"btn_",attrs:{type:"primary"},on:{click:i.saveVideo}},[i._v("保存")]),i._v(" "),a("el-button",{staticClass:"btn_",on:{click:i.cancelVideo}},[i._v("取消")])],1)])],1)},staticRenderFns:[]}}});
//# sourceMappingURL=17.31f2e8adb59d00bf8cf4.js.map