webpackJsonp([33],{356:function(e,t,a){function r(e){a(721)}var n=a(4)(a(482),a(838),r,null,null);e.exports=n.exports},482:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(37),n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default={data:function(){return{options:[{value:"",label:"全部"},{value:"国产",label:"国产"},{value:"进口",label:"进口"}],pagesize:10,currentPage:1,totalCount:1e3,value:"",bindTitle:null,itemBrandId:null,itemBrandName:null,itemBrandHome:"",itemBrandLogo:null,brandOperaType:1,formLabelWidth:"120px",imageUrl:null,tableData:[],qiNiuToken:null,itemBrandNameAdd:null,itemBrandHomeAdd:null,itemBrandLogoAdd:null,qiNiuUrl:r.a.qiNiuUrl,showAddBrandAlert:!1,ifShowBigImg:!1,bigImgSrc:null}},created:function(){var e=this;r.a.axiosGetReq("/file/getUpToken",null).then(function(t){"SUCCEED"===t.data.callStatus&&(e.qiNiuToken={token:t.data.msg})}),this.queryHandler()},methods:{handleCurrentChange:function(e){this.currentPage=e,this.queryHandler(e)},uploadFile:function(e,t){this.itemBrandLogoAdd=r.a.qiniuShUrl+t.response.key,this.imageUrl=r.a.qiniuShUrl+t.response.key},beforeAvatarUpload:function(e){},queryHandler:function(e){var t=this;void 0==e||"object"==(void 0===e?"undefined":n(e))?this.currentPage=1:this.currentPage=e;var a={itemBrandName:this.itemBrandName,itemBrandHome:this.itemBrandHome,currentPage:this.currentPage,numberPerPage:this.pagesize};r.a.axiosPostReq("/item/queryItemBrand",a).then(function(e){"SUCCEED"===e.data.callStatus?(t.tableData=e.data.data,t.totalCount=e.data.totalNumber):t.$message.error("网络出错，请稍后再试！")})},addGoodBrand:function(){this.bindTitle="添加商品品牌",this.itemBrandNameAdd=null,this.itemBrandHomeAdd=null,this.itemBrandLogoAdd=null,this.showAddBrandAlert=!0,this.imageUrl=null,this.brandOperaType=1},showBigImg:function(e){this.ifShowBigImg=!0,this.bigImgSrc=this.tableData[e].itemBrandLogo},DELEONE:function(e){var t=this;this.$confirm("确定删除该品牌吗, 是否继续?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a={itemBrandId:t.tableData[e].itemBrandId};r.a.axiosPostReq("/item/deleteItemBrand",a).then(function(e){"SUCCEED"===e.data.callStatus?(t.$message({message:"删除成功",type:"success"}),t.queryHandler()):t.$message.error("该品牌下已有商品，不能删除！")})}).catch(function(){})},changeOneBrand:function(e){this.bindTitle="修改商品品牌",this.showAddBrandAlert=!0;var t=this.tableData[e];this.itemBrandHomeAdd=t.itemBrandHome,this.itemBrandNameAdd=t.itemBrandName,this.itemBrandLogoAdd=t.itemBrandLogo,this.itemBrandId=t.itemBrandId,this.imageUrl=this.itemBrandLogoAdd,this.brandOperaType=2},saveOneBrand:function(){var e=this,t=this;if(1==this.brandOperaType){var a={itemBrandName:this.itemBrandNameAdd,itemBrandHome:this.itemBrandHomeAdd,itemBrandLogo:this.itemBrandLogoAdd};if(!this.itemBrandNameAdd)return this.$message.error("请填写品牌名称！"),!1;if(!this.itemBrandHomeAdd)return this.$message.error("请选择品牌产地"),!1;if(!this.itemBrandLogoAdd)return this.$message.error("请上传品牌LOGO"),!1;r.a.axiosPostReq("/item/addItemBrand",a).then(function(a){"SUCCEED"===a.data.callStatus?(e.$message({message:"商品品牌添加成功",type:"success"}),t.queryHandler()):e.$message.error("网络出错，请稍后再试！")})}if(2==this.brandOperaType){var n={itemBrandId:this.itemBrandId,itemBrandName:this.itemBrandNameAdd,itemBrandHome:this.itemBrandHomeAdd,itemBrandLogo:this.itemBrandLogoAdd};r.a.axiosPostReq("/item/updateItemBrand",n).then(function(a){"SUCCEED"===a.data.callStatus?(e.$message({message:"商品品牌修改成功",type:"success"}),t.queryHandler()):e.$message.error("网络出错，请稍后再试！")})}this.showAddBrandAlert=!1}}}},591:function(e,t,a){t=e.exports=a(349)(!0),t.push([e.i,'.clearfix{zoom:1}.clearfix:after{content:"";clear:both;display:block}.brandWarp .avatar-uploader .el-upload{border:1px dashed #d9d9d9;border-radius:6px;cursor:pointer;position:relative;overflow:hidden}.brandWarp .avatar-uploader .el-upload:hover{border-color:#20a0ff}.brandWarp .avatar-uploader-icon{font-size:28px;width:178px;height:178px;line-height:178px}.brandWarp .avatar{width:178px;height:178px;display:block}.add_btn{float:right;margin:20px 118px 20px 0}.item_w_input{width:216px}',"",{version:3,sources:["F:/yayi-web/src/components/admin/bsseInfoManner/brand.vue"],names:[],mappings:"AACA,UACE,MAAO,CACR,AACD,gBACE,WAAW,AACX,WAAW,AACX,aAAc,CACf,AACD,uCACI,0BAA2B,AAC3B,kBAAmB,AACnB,eAAgB,AAChB,kBAAmB,AACnB,eAAiB,CACpB,AACD,6CACI,oBAAsB,CACzB,AACD,iCACI,eAAgB,AAChB,YAAa,AACb,aAAc,AACd,iBAAmB,CACtB,AACD,mBACI,YAAa,AACb,aAAc,AACd,aAAe,CAClB,AACD,SACE,YAAY,AACZ,wBAA0B,CAC3B,AACD,cACE,WAAa,CACd",file:"brand.vue",sourcesContent:['\n.clearfix{\r\n  zoom:1;\n}\n.clearfix:after{\r\n  content:"";\r\n  clear:both;\r\n  display:block;\n}\n.brandWarp .avatar-uploader .el-upload {\r\n    border: 1px dashed #d9d9d9;\r\n    border-radius: 6px;\r\n    cursor: pointer;\r\n    position: relative;\r\n    overflow: hidden;\n}\n.brandWarp   .avatar-uploader .el-upload:hover {\r\n    border-color: #20a0ff;\n}\n.brandWarp  .avatar-uploader-icon {\r\n    font-size: 28px;\r\n    width: 178px;\r\n    height: 178px;\r\n    line-height: 178px;\n}\n.brandWarp   .avatar {\r\n    width: 178px;\r\n    height: 178px;\r\n    display: block;\n}\n.add_btn{\r\n  float:right;\r\n  margin: 20px 118px 20px 0;\n}\n.item_w_input{\r\n  width: 216px;\n}\r\n'],sourceRoot:""}])},721:function(e,t,a){var r=a(591);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(350)("30033031",r,!0)},838:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{staticClass:"brandWarp"},[a("el-col",{staticClass:"warp-breadcrum",attrs:{span:24}},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("b",[e._v("商品基础资料管理")])]),e._v(" "),a("el-breadcrumb-item",[e._v("商品品牌管理")])],1)],1),e._v(" "),a("el-col",{staticClass:"warp-main",attrs:{span:24}},[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"品牌名称："}},[a("el-input",{model:{value:e.itemBrandName,callback:function(t){e.itemBrandName=t},expression:"itemBrandName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"产地："}},[a("el-select",{model:{value:e.itemBrandHome,callback:function(t){e.itemBrandHome=t},expression:"itemBrandHome"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.queryHandler}},[e._v("查询")])],1)],1)],1),e._v(" "),a("el-col",{staticStyle:{"text-align":"right","line-height":"40px"}},[a("el-button",{staticClass:"add_btn",attrs:{type:"primary"},on:{click:function(t){e.addGoodBrand()}}},[e._v("+添加商品品牌")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{prop:"itemBrandName",align:"center",label:"品牌名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"itemBrandLogo",align:"center",label:"logo"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{cursor:"pointer",width:"32px",height:"32px","vertical-align":"middle"},attrs:{src:e.tableData[t.$index].itemBrandLogo,alt:"点击查看大图",title:"点击查看大图"},on:{click:function(a){e.showBigImg(t.$index)}}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"itemBrandHome",align:"center",label:"产地"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){e.changeOneBrand(t.$index)}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){e.DELEONE(t.$index)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:this.totalCount>this.pagesize,expression:"this.totalCount > this.pagesize"}],staticClass:"block",staticStyle:{position:"absolute",top:"650px",right:"0"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pagesize,layout:"prev, pager, next, jumper",total:e.totalCount},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1)],1),e._v(" "),a("div",{staticClass:"clearfix"}),e._v(" "),a("el-dialog",{attrs:{title:"照片大图",visible:e.ifShowBigImg},on:{"update:visible":function(t){e.ifShowBigImg=t}}},[a("img",{staticStyle:{width:"350px",height:"350px",display:"block",margin:"auto"},attrs:{src:e.bigImgSrc}})]),e._v(" "),a("el-dialog",{attrs:{title:e.bindTitle,size:"tiny",visible:e.showAddBrandAlert},on:{"update:visible":function(t){e.showAddBrandAlert=t}}},[a("el-form",[a("el-form-item",{attrs:{label:"品牌名称：","label-width":e.formLabelWidth}},[a("el-input",{staticClass:"item_w_input fl",model:{value:e.itemBrandNameAdd,callback:function(t){e.itemBrandNameAdd=t},expression:"itemBrandNameAdd"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"产地：","label-width":e.formLabelWidth}},[a("el-select",{model:{value:e.itemBrandHomeAdd,callback:function(t){e.itemBrandHomeAdd=t},expression:"itemBrandHomeAdd"}},[a("el-option",{attrs:{label:"国产",value:"国产"}}),e._v(" "),a("el-option",{attrs:{label:"进口",value:"进口"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"logo：","label-width":e.formLabelWidth}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{"on-success":e.uploadFile,action:e.qiNiuUrl,"before-upload":e.beforeAvatarUpload,"show-file-list":!1,data:e.qiNiuToken}},[e.imageUrl?a("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.saveOneBrand()}}},[e._v("保存")])],1)],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=33.3076a513ac590ca84960.js.map