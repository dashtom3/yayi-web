webpackJsonp([34],{355:function(t,e,a){function r(t){a(716)}var o=a(4)(a(481),a(833),r,null,null);t.exports=o.exports},481:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{pagesize:10,currentPage:1,totalCount:1e3,formData:{addGoodAttrName:null,addGoodAttrOneVal:null},rules1:{addGoodAttrName:{required:!0,message:"请输入属性名称",trigger:"blur"},addGoodAttrOneVal:{required:!0,message:"请输入属性值",trigger:"blur"}},bindTitle:null,addGoodAttrValues:[],searchAttrName:null,changeThisAll:null,changAttrIndex:null,attOperaType:1,wantAddAttr:{addName:null,willname:null,addAttrValues:[]},addAttrShow:[],tableData:[],showAddGoodAttr:!1,channgAttrId:null,flag1:!0}},created:function(){this.getGoodAttrList()},methods:{handleCurrentChange:function(t){var e=this;e.currentPage=t,e.currentPage=void 0==t?1:t,this.search(e.currentPage)},fenYeGetData:function(t){var e=this;this.fenyeNum=t;var a={currentPage:t};e.global.axiosGetReq("/item/queryProperty",a).then(function(t){if("SUCCEED"===t.data.callStatus){console.log(t,"getGoodAttrList");var a=t.data.data;e.tableData=a,e.totalCount=t.data.totalNumber}else e.$message.error("网络出错，请稍后再试！")},function(t){e.$message.error("网络出错，请稍后再试！")})},getGoodAttrList:function(){var t=this;t.global.axiosGetReq("/item/queryProperty").then(function(e){if("SUCCEED"===e.data.callStatus){console.log(e,"getGoodAttrList");var a=e.data.data;t.tableData=a,t.totalCount=e.data.totalNumber}else t.$message.error("网络出错，请稍后再试！")},function(e){t.$message.error("网络出错，请稍后再试！")})},reloadPage:function(t){var e=this,a={};a.currentPage=this.currentPage,e.global.axiosGetReq("/item/queryProperty",a).then(function(a){if("SUCCEED"===a.data.callStatus){console.log(a,"reloadPage");var r=a.data.data;e.tableData=r,e.totalCount=a.data.totalNumber,t()}else e.$message.error("网络出错，请稍后再试！")},function(t){e.$message.error("网络出错，请稍后再试！")})},addGoodAttr:function(){var t=this;t.bindTitle="添加商品属性",t.showAddGoodAttr=!0,t.attOperaType=1,t.formData.addGoodAttrName=null,t.addGoodAttrValues=[],t.flag1=!1},changThisAttrVal:function(t,e,a){var r=this;e.target._value?2==r.attOperaType&&r.$confirm("确定修改该属性值吗, 是否继续?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var o={itemPparam:e.target._value,itemSKU:a.itemSKU};r.global.axiosPostReq("/item/updatePropertyd",o).then(function(a){r.addGoodAttrValues[t].itemPparam=e.target._value,r.changeThisAll=null,r.flag1=!0})}):(this.$alert("请填写完整商品的属性值",{confirmButtonText:"确定"}),r.flag1=!1)},changeThisAttr:function(t,e){this.changeThisAll=t,this.flag1=!1,this.attOperaType=2},search:function(t){var e=this,a={itemPropertyName:e.searchAttrName,currentPage:t};e.global.axiosPostReq("/item/queryProperty",a).then(function(t){"SUCCEED"===t.data.callStatus?(console.log(t,"searchData"),e.tableData=t.data.data,e.totalCount=t.data.totalNumber):e.$message.error("网络出错，请稍后再试！")})},DELEONE:function(t,e){var a=this;a.$confirm("确定删除该属性吗?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var r={itemPropertyId:e.itemPropertyId};console.log(r),a.global.axiosPostReq("/item/deleteProperty",r).then(function(e){"SUCCEED"===e.data.callStatus?(a.$message({type:"success",message:"删除成功!"}),a.tableData.splice(t,1)):a.$message.error("网络出错，请稍后再试！")})})},alertMsg:function(t){this.$alert(t,{confirmButtonText:"确定"})},changeOneAttr:function(t,e){var a=this;a.bindTitle="修改商品属性",a.formData.addGoodAttrName=e.itemPropertyName,a.addGoodAttrValues=e.itempropertydList,a.channgAttrId=e.itemPropertyId,a.changAttrIndex=t,a.attOperaType=2,a.showAddGoodAttr=!0},saveOneAttrs:function(){var t=this;if(1==t.attOperaType)if(t.flag1){var e={},a=[],r=[];for(var o in t.addGoodAttrValues)a.push(t.addGoodAttrValues[o].itemPparam),r.push({itemPparam:t.addGoodAttrValues[o].itemPparam});e.itemPparamList=a,e.itemPropertyName=t.formData.addGoodAttrName,console.log(e),t.global.axiosPostReq("/item/addPropertydAndPropertyName",e).then(function(a){console.log(a),"SUCCEED"===a.data.callStatus?(e.itempropertydList=r,t.addGoodAttrValues=[],t.formData.addGoodAttrName=null,t.showAddGoodAttr=!1):t.$message.error("网络出错，请稍后再试！")})}else this.$alert("请填写完整商品的属性名或属性值",{confirmButtonText:"确定"});if(2==t.attOperaType)if(t.flag1){var n={itemPropertyId:parseInt(t.tableData[t.changAttrIndex].itemPropertyId),itemPropertyName:t.tableData[t.changAttrIndex].itemPropertyName,itemPparamList:[]};for(var l in t.tableData[t.changAttrIndex].itempropertydList)n.itemPparamList.push(t.tableData[t.changAttrIndex].itempropertydList[l].itemPparam);console.log(n,"asas"),t.global.axiosPostReq("/item/updateProperty",n).then(function(e){console.log(e),"SUCCEED"===e.data.callStatus?t.showAddGoodAttr=!1:t.$message.error("网络出错，请稍后再试！")})}else this.$alert("请填写完整商品的属性名或属性值",{confirmButtonText:"确定"})},deleOneAttrVal:function(t,e){var a=this;2==a.attOperaType?a.$confirm("确定删除该属性值吗, 是否继续?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.addGoodAttrValues.splice(t,1),a.changeThisAll=null}):(a.addGoodAttrValues.splice(t,1),a.changeThisAll=null)},addOneAttrVal:function(t){var e=this;e.$refs[t].validate(function(t){if(!t)return e.alertMsg("请填写完整商品的属性名或属性值!"),e.flag1=!1,!1;if(2==e.attOperaType){var a=!0;for(var r in e.addGoodAttrValues)e.addGoodAttrValues[r].itemPparam==e.formData.addGoodAttrOneVal&&(a="填写的属性值有重复项，请重新填写");if(1==a){var o={};o.itemPparam=e.formData.addGoodAttrOneVal,e.addGoodAttrValues.push(o),e.formData.addGoodAttrOneVal=null,e.flag1=!0}else e.alertMsg(a)}else{var a=!0;for(var n in e.addGoodAttrValues)e.addGoodAttrValues[n].itemPparam==e.formData.addGoodAttrOneVal&&(a="填写的属性值有重复项，请重新填写");if(1==a){var o={};o.itemPparam=e.formData.addGoodAttrOneVal,e.addGoodAttrValues.push(o),e.formData.addGoodAttrOneVal=null,e.flag1=!0}else e.alertMsg(a)}})}}}},586:function(t,e,a){e=t.exports=a(349)(!0),e.push([t.i,".demo-table-expand label{font-weight:700}.warp .warp-main .el-input{width:100%;padding-right:0}.warp .el-input{width:70%}","",{version:3,sources:["F:/yayi-web/src/components/admin/bsseInfoManner/attr.vue"],names:[],mappings:"AACA,yBACE,eAAkB,CACnB,AACD,2BACE,WAAY,AACZ,eAAmB,CACpB,AACD,gBACE,SAAW,CAEZ",file:"attr.vue",sourcesContent:["\n.demo-table-expand label {\n  font-weight: bold;\n}\n.warp  .warp-main .el-input{\n  width: 100%;\n  padding-right: 0px;\n}\n.warp .el-input{\n  width: 70%;\n  /*padding-right: 20px;*/\n}\n"],sourceRoot:""}])},716:function(t,e,a){var r=a(586);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a(350)("849ba278",r,!0)},833:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",{staticClass:"warp"},[a("el-col",{staticClass:"warp-breadcrum",attrs:{span:24}},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("b",[t._v("商品基础资料管理")])]),t._v(" "),a("el-breadcrumb-item",[t._v("商品属性管理")])],1)],1),t._v(" "),a("el-col",{staticClass:"warp-main",attrs:{span:24}},[a("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"请输入属性名称"},model:{value:t.searchAttrName,callback:function(e){t.searchAttrName=e},expression:"searchAttrName"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.search()}}},[t._v("查询")])],1)],1)],1),t._v(" "),a("el-col",{staticStyle:{"text-align":"right","line-height":"40px"}},[a("el-button",{attrs:{type:"text"},on:{click:function(e){t.addGoodAttr()}}},[t._v("+添加商品属性")])],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{type:"index",width:"200px",align:"center",label:"序号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"itemPropertyName",align:"center",label:"属性名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"itempropertydList",align:"center",label:"属性值"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.itempropertydList,function(r,o){return a("span",[t._v("\n            "+t._s(r.itemPparam)+"\n            "),o!=e.row.itempropertydList.length-1?a("span",[t._v("/")]):t._e()])})}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){t.changeOneAttr(e.$index,e.row)}}},[t._v("修改")]),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){t.DELEONE(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:this.totalCount>this.pagesize,expression:"this.totalCount > this.pagesize"}],attrs:{"current-page":t.currentPage,"page-size":t.pagesize,layout:"prev, pager, next, jumper",total:t.totalCount},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e}}})],1)],1),t._v(" "),a("el-dialog",{attrs:{title:t.bindTitle,visible:t.showAddGoodAttr,"before-close":t.reloadPage},on:{"update:visible":function(e){t.showAddGoodAttr=e}}},[a("el-form",{ref:"formData",staticClass:"demo-dynamic",attrs:{"label-width":"100px",model:t.formData,rules:t.rules1}},[a("el-form-item",{attrs:{prop:"addGoodAttrName",label:"属性名称："}},[a("el-input",{model:{value:t.formData.addGoodAttrName,callback:function(e){t.formData.addGoodAttrName=e},expression:"formData.addGoodAttrName"}})],1),t._v(" "),a("el-form-item",{attrs:{prop:"addGoodAttrOneVal",label:"属性值："}},[a("el-input",{model:{value:t.formData.addGoodAttrOneVal,callback:function(e){t.formData.addGoodAttrOneVal=e},expression:"formData.addGoodAttrOneVal"}}),t._v(" "),a("el-button",{on:{click:function(e){t.addOneAttrVal("formData")}}},[t._v("添加")])],1)],1),t._v(" "),a("el-table",{staticStyle:{windth:"80%"},attrs:{border:"",data:t.addGoodAttrValues}},[a("el-table-column",{attrs:{align:"center",property:"itemPparam",label:"属性值"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{minlength:5,disabled:e.$index!=t.changeThisAll,value:e.row.itemPparam},on:{blur:function(a){t.changThisAttrVal(e.$index,a,e.row)}}})]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){t.deleOneAttrVal(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("div",{staticClass:"dialog-footer",slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.saveOneAttrs()}}},[t._v("保存")])],1)],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=34.c7662a7467567d5072a2.js.map