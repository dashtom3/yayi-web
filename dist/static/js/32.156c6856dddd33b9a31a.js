webpackJsonp([32],{357:function(e,a,t){function s(e){t(693)}var l=t(4)(t(483),t(815),s,null,null);e.exports=l.exports},483:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};a.default={data:function(){return{ruleForm:{upClass:[],classname:"",oldClassname:"",itemId:null,itemClassifyGrade:null},searchClassfyName:"",searchParentClassfyName:"",PreviousClassify:"",classfyOperaType:1,classfyChangeIndex:null,options:[],dialogFormVisible:!1,formLabelWidth:"120px",bindTitle:null,tableData:[],rules:{upClass:[{type:"array",required:!0,message:"请选择上级分类",trigger:"blur"}],classname:[{required:!0,message:"请输入分类名称",trigger:"blur"}]},a:[],addNew:!0,pagesize:10,currentPage:1,totalCount:0}},created:function(){var e=this;e.getClassify(),e.getAllClassify()},methods:{handleCurrentChange:function(e){var a=this;a.currentPage=e,a.search(e)},getClassify:function(){var e=this,a={currentPage:e.currentPage,numberPerPage:e.pagesize};e.global.axiosGetReq("/item/showItemClassify",a).then(function(a){"SUCCEED"===a.data.callStatus?(e.tableData=a.data.data,e.totalCount=a.data.totalNumber):e.$message.error("网络出错，请稍后再试！")})},getAllClassify:function(){var e=this;e.global.axiosGetReq("/item/getAllClassifyAndBrand").then(function(a){if("SUCCEED"===a.data.callStatus){e.options=a.data.data.classifyList;for(var t=0;t<e.options.length;t++){e.options[t].label=e.options[t].oneClassify,e.options[t].children=e.options[t].classifyTwoList;for(var s in e.options[t].children)e.options[t].children[s].label=e.options[t].children[s].classifyTwoName}var l=[{label:"根节点",children:[]}];l[0].children=e.options,e.options=l}else e.$message.error("网络出错，请稍后再试！")})},addClassfy:function(){var e=this;e.bindTitle="添加商品分类",e.dialogFormVisible=!0,e.addNew=!0},search:function(e){var a=this;void 0==e||"object"==(void 0===e?"undefined":s(e))?a.currentPage=1:a.currentPage=e;var t={itemClassifyName:a.searchClassfyName,itemPreviousClassify:a.searchParentClassfyName,currentPage:a.currentPage,numberPerPage:a.pagesize};a.global.axiosPostReq("/item/showItemClassify",t).then(function(e){"SUCCEED"===e.data.callStatus?(a.tableData=e.data.data,a.totalCount=e.data.totalNumber):a.$message.error("网络出错，请稍后再试！")})},DELEONE:function(e){var a=this;a.$confirm("确定删除该属性吗, 是否继续?",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t={itemClassifyId:e.row.itemClassifyId,itemClassifyName:e.row.itemClassifyName,itemClassifyGrade:e.row.itemClassifyGrade};console.log(t,"23232"),a.global.axiosPostReq("/item/deleteItemClassify",t).then(function(e){"SUCCEED"===e.data.callStatus?(a.getClassify(),a.getAllClassify(),a.$message({type:"success",message:"删除成功!"})):a.$message.error("网络出错，请稍后再试！")})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},changeOneAttr:function(e){var a=this;console.log(e.row),a.bindTitle="修改商品分类",a.dialogFormVisible=!0,a.PreviousClassify=e.row.itemPreviousClassify,a.ruleForm.classname=e.row.itemClassifyName,a.ruleForm.oldClassname=e.row.itemClassifyName,a.ruleForm.itemId=e.row.itemClassifyId,a.ruleForm.itemClassifyGrade=e.row.itemClassifyGrade,a.addNew=!1},saveOneAttrs:function(e){var a=this;a.$refs[e].validate(function(e){if(!e)return!1;if("添加商品分类"==a.bindTitle){var t={itemClassifyName:a.ruleForm.classname,itemPreviousClassify:a.ruleForm.upClass.slice(-1)[0],itemClassifyGrade:a.ruleForm.upClass.length};a.global.axiosPostReq("/item/addItemClassify",t).then(function(e){"SUCCEED"===e.data.callStatus?(a.getClassify(),a.getAllClassify(),a.ruleForm.classname="",a.ruleForm.upClass=[],a.dialogFormVisible=!1,a.$message({type:"success",message:"添加成功!"}),a.tableData=e.data.data):a.$message.error("网络出错，请稍后再试！")})}else{var t={itemClassifyId:a.ruleForm.itemId,itemClassifyName:a.ruleForm.classname,itemOldName:a.ruleForm.oldClassname,itemClassifyGrade:a.ruleForm.itemClassifyGrade};console.log(a.ruleForm,"22222222"),a.global.axiosPostReq("/item/updateItemClassify",t).then(function(e){"SUCCEED"===e.data.callStatus?(a.getClassify(),a.getAllClassify(),a.ruleForm.classname="",a.ruleForm.upClass=[],a.ruleForm.itemId=null,a.ruleForm.itemClassifyGrade=null,a.dialogFormVisible=!1,a.$message({type:"success",message:"修改成功!"}),a.tableData=e.data.data):a.$message.error("网络出错，请稍后再试！")})}})},handleClose:function(){var e=this;e.ruleForm.classname="",e.ruleForm.upClass=[],e.ruleForm.itemId=null,e.ruleForm.itemClassifyGrade=null,e.dialogFormVisible=!1}}}},563:function(e,a,t){a=e.exports=t(349)(!0),a.push([e.i,".classfy .el-dialog__footer{margin-left:120px;text-align:left}.cascader{width:260px}","",{version:3,sources:["F:/yayi-web/src/components/admin/bsseInfoManner/classfy.vue"],names:[],mappings:"AACA,4BACE,kBAAmB,AACnB,eAAiB,CAClB,AACD,UACE,WAAa,CACd",file:"classfy.vue",sourcesContent:["\n.classfy  .el-dialog__footer{\r\n  margin-left: 120px;\r\n  text-align: left;\n}\n.cascader {\r\n  width: 260px;\n}\r\n"],sourceRoot:""}])},693:function(e,a,t){var s=t(563);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);t(350)("ebc4ed1a",s,!0)},815:function(e,a){e.exports={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("el-row",{staticClass:"warp classfy"},[t("el-col",{staticClass:"warp-breadcrum",attrs:{span:24}},[t("el-breadcrumb",{attrs:{separator:"/"}},[t("el-breadcrumb-item",[t("b",[e._v("商品基础资料管理")])]),e._v(" "),t("el-breadcrumb-item",[e._v("商品分类管理")])],1)],1),e._v(" "),t("el-col",{staticClass:"warp-main",attrs:{span:24}},[t("el-col",{staticClass:"toolbar",staticStyle:{"padding-bottom":"0px"}},[t("el-form",{attrs:{inline:!0}},[t("el-form-item",{attrs:{label:"分类名称："}},[t("el-input",{model:{value:e.searchClassfyName,callback:function(a){e.searchClassfyName=a},expression:"searchClassfyName"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"上级分类："}},[t("el-input",{model:{value:e.searchParentClassfyName,callback:function(a){e.searchParentClassfyName=a},expression:"searchParentClassfyName"}})],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(a){e.search()}}},[e._v("查询")])],1)],1)],1),e._v(" "),t("el-col",{staticStyle:{"text-align":"right","line-height":"40px"}},[t("el-button",{attrs:{type:"text"},on:{click:function(a){e.addClassfy()}}},[e._v("+添加商品分类")])],1),e._v(" "),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[t("el-table-column",{attrs:{prop:"itemClassifyName",align:"center",label:"分类名称"}}),e._v(" "),t("el-table-column",{attrs:{prop:"itemPreviousClassify",align:"center",label:"上级分类"}}),e._v(" "),t("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){e.changeOneAttr(a)}}},[e._v("修改")]),e._v(" "),t("el-button",{attrs:{type:"text"},on:{click:function(t){e.DELEONE(a)}}},[e._v("删除")])]}}])})],1),e._v(" "),t("div",{staticClass:"block"},[t("el-pagination",{directives:[{name:"show",rawName:"v-show",value:this.totalCount>this.pagesize,expression:"this.totalCount > this.pagesize"}],attrs:{"current-page":e.currentPage,"page-size":e.pagesize,layout:"prev, pager, next, jumper",total:e.totalCount},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(a){e.currentPage=a}}})],1)],1),e._v(" "),t("el-dialog",{attrs:{title:e.bindTitle,visible:e.dialogFormVisible,"before-close":e.handleClose},on:{"update:visible":function(a){e.dialogFormVisible=a}}},[t("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules}},[e.addNew?t("el-form-item",{attrs:{label:"上级分类：",prop:"upClass","label-width":e.formLabelWidth}},[t("el-cascader",{staticClass:"cascader",attrs:{props:{value:"label"},options:e.options,"show-all-levels":!1,"change-on-select":""},model:{value:e.ruleForm.upClass,callback:function(a){e.ruleForm.upClass=a},expression:"ruleForm.upClass"}},[t("el-button",{attrs:{icon:"search"},slot:"append"})],1)],1):t("el-form-item",{attrs:{label:"上级分类：","label-width":e.formLabelWidth}},[t("p",[e._v(e._s(e.PreviousClassify))])]),e._v(" "),t("el-form-item",{attrs:{label:"分类名称：",prop:"classname","label-width":e.formLabelWidth}},[t("el-input",{attrs:{"auto-complete":"off"},model:{value:e.ruleForm.classname,callback:function(a){e.ruleForm.classname=a},expression:"ruleForm.classname"}})],1),e._v(" "),t("el-form-item",{staticStyle:{"text-align":"right"}},[t("el-button",{attrs:{type:"primary"},on:{click:function(a){e.saveOneAttrs("ruleForm")}}},[e._v("保存")])],1)],1)],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=32.156c6856dddd33b9a31a.js.map