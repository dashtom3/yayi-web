webpackJsonp([6],{362:function(e,t,i){function a(e){i(726)}var o=i(4)(i(478),i(839),a,"data-v-d06e5848",null);e.exports=o.exports},383:function(e,t,i){"use strict";function a(e,t){for(var i=t-(e+"").length,a=0;a<i;a++)e="0"+e;return e}var o=/([yMdhsm])(\1*)/g;t.a={getQueryStringByName:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),i=window.location.search.substr(1).match(t),a="";return null!=i&&(a=i[2]),t=null,i=null,null===a||""===a||"undefined"===a?"":a},formatDate:{format:function(e,t){return t=t||"yyyy-MM-dd",t.replace(o,function(t){switch(t.charAt(0)){case"y":return a(e.getFullYear(),t.length);case"M":return a(e.getMonth()+1,t.length);case"d":return a(e.getDate(),t.length);case"w":return e.getDay()+1;case"h":return a(e.getHours(),t.length);case"m":return a(e.getMinutes(),t.length);case"s":return a(e.getSeconds(),t.length)}})},parse:function(e,t){var i=t.match(o),a=e.match(/(\d)+/g);if(i.length===a.length){for(var r=new Date(1970,0,1),s=0;s<i.length;s++){var n=parseInt(a[s]);switch(i[s].charAt(0)){case"y":r.setFullYear(n);break;case"M":r.setMonth(n-1);break;case"d":r.setDate(n);break;case"h":r.setHours(n);break;case"m":r.setMinutes(n);break;case"s":r.setSeconds(n)}}return r}return null}}}},478:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(749),o=i.n(a),r=i(383);t.default={name:"secondStep",data:function(){return{secondStep:!0,thirdStep:!1,secondForm:{storeItemId:"",apparatusType:"",unit:"",producePompany:"",registerDate:"",itemPacking:"",itemLevels:"",itemRange:"",remark:""},ruleForm:{},newForm:{},message:{},rules:{}}},components:{thirdStep:o.a},created:function(){var e=this;e.editCargo=JSON.parse(window.sessionStorage.getItem("editCargo")),null!==e.editCargo?(e.ruleForm=e.$route.params.ruleForm,e.secondForm.storeItemId=e.editCargo.itemDetail.storeItemId,e.secondForm.apparatusType=e.editCargo.itemDetail.apparatusType,e.secondForm.unit=e.editCargo.itemDetail.unit,e.secondForm.producePompany=e.editCargo.itemDetail.producePompany,e.secondForm.registerDate=r.a.formatDate.format(new Date(e.editCargo.itemDetail.registerDate)),e.secondForm.itemPacking=e.editCargo.itemDetail.itemPacking,e.secondForm.itemLevels=e.editCargo.itemDetail.itemLevels,e.secondForm.itemRange=e.editCargo.itemDetail.itemRange,e.secondForm.remark=e.editCargo.itemDetail.remark):e.ruleForm=e.$route.params.ruleForm,console.log(e.ruleForm,e.secondForm,"opo")},methods:{nextToThird:function(e){var t=this;t.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;null!==t.editCargo?(t.secondForm.registerDate=r.a.formatDate.format(new Date(t.secondForm.registerDate)),Object.assign(t.newForm,t.secondForm,t.ruleForm),t.secondStep=!1,t.thirdStep=!0):(t.secondForm.registerDate=r.a.formatDate.format(t.secondForm.registerDate),Object.assign(t.newForm,t.secondForm,t.ruleForm),t.secondStep=!1,t.thirdStep=!0)})},returnFrist:function(){var e=this;e.$router.push({name:"addMerchandise",params:{ruleForm:e.ruleForm}})},showMsgFromThirdStep:function(e){var t=this;t.thirdStep=e,t.secondStep=!0}}}},479:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(34),o=i(58);i.n(o);t.default={name:"thirdStep",props:["message"],data:function(){return{fileList2:[],fileList:[],thirdForm:{itemPica:"",itemPicb:"",itemPicc:"",itemPicd:"",itemPice:"",itemDesc:"",itemUse:"",video:""},options:[],thirdStep:!0,qiNiuToken:{},qiNiuUrl:a.a.qiNiuUrl,dialogVisible:!1,imageUrl:"",fwb:"",state:null}},created:function(){var e=this;e.editCargo=JSON.parse(window.sessionStorage.getItem("editCargo")),null!==e.editCargo?(e.thirdForm.video=e.editCargo.itemDetail.video,e.state=1,console.log("buweikong"),a.a.axiosGetReq("/file/getUpToken").then(function(t){"SUCCEED"===t.data.callStatus&&(e.qiNiuToken={token:t.data.msg},console.log(e.qiNiuToken.token))}),e.queryHandler()):(a.a.axiosGetReq("/file/getUpToken").then(function(t){"SUCCEED"===t.data.callStatus&&(e.qiNiuToken={token:t.data.msg},console.log(e.qiNiuToken.token))}),e.queryHandler())},mounted:function(){var e=this;e.quill1=new Quill("#editor1",{modules:{toolbar:"#toolbar1"},placeholder:"",theme:"snow"}),e.quill2=new Quill("#editor2",{modules:{toolbar:"#toolbar2"},placeholder:"",theme:"snow"})},methods:{insertImg:function(){var e=this;e.imageUrl;0==e.fwb?e.quill1.insertEmbed(0,"image",e.imageUrl):e.quill2.insertEmbed(0,"image",e.imageUrl),e.dialogVisible=!1},uploaImage:function(){var e=this;e.imageUrl="",e.fwb=0,e.dialogVisible=!0},uploaImage1:function(){var e=this;e.imageUrl="",e.fwb=1,e.dialogVisible=!0},handleAvatarSuccess:function(e,t){var i=this;i.imageUrl=a.a.qiniuShUrl+e.key,console.log(i.imageUrl)},queryHandler:function(){var e=this;a.a.axiosPostReq("/vid/showVid",{}).then(function(t){"SUCCEED"===t.data.callStatus?(e.options=t.data.data,console.log(e.options,"xs")):e.$message.error("查询失败！")})},uploadFile:function(e,t){var i=this,o="";o=a.a.qiniuShUrl+e.key,i.fileList.push(o)},handleRemove:function(e,t){var i=this,o=a.a.qiniuShUrl+e.response.key,r=i.fileList.filter(function(e,t,i){return e!==o});i.fileList=r},save:function(){var e=this;if(1!==e.state){e.thirdForm.itemDesc=e.quill1.container.firstChild.innerHTML,e.thirdForm.itemUse=e.quill2.container.firstChild.innerHTML,e.thirdForm.itemPica=e.fileList[0],e.thirdForm.itemPicb=e.fileList[1],e.thirdForm.itemPicc=e.fileList[2],e.thirdForm.itemPicd=e.fileList[3],e.thirdForm.itemPice=e.fileList[4],Object.assign(e.thirdForm,e.message),delete e.thirdForm.itemBrand,delete e.thirdForm.type,delete e.thirdForm.shopType,delete e.thirdForm.items;var t=JSON.stringify(e.thirdForm.itemValueList),i=new XMLHttpRequest;i.open("POST","http://47.93.48.111:8080/api/item/insertItemValue"),i.setRequestHeader("Content-Type","application/json"),i.send(t),i.onreadystatechange=function(){"SUCCEED"==JSON.parse(i.response).callStatus?(delete e.thirdForm.itemValueList,a.a.axiosPostReq("/item/insert",e.thirdForm).then(function(t){"SUCCEED"===t.data.callStatus?(console.log(t,"保存成功！"),e.$message("保存成功！"),e.$router.push({name:"商品信息管理",params:{list:!0,addMerchandise:!1}})):e.$message.error("网络出错，请稍后再试！")})):e.$message.error("保存失败！")}}else{console.log("xiugai"),e.thirdForm.itemDesc=e.quill1.container.firstChild.innerHTML,e.thirdForm.itemUse=e.quill2.container.firstChild.innerHTML,console.log(e.thirdForm.itemDesc,e.thirdForm.itemUse),e.thirdForm.itemPica=e.fileList[0],e.thirdForm.itemPicb=e.fileList[1],e.thirdForm.itemPicc=e.fileList[2],e.thirdForm.itemPicd=e.fileList[3],e.thirdForm.itemPice=e.fileList[4],Object.assign(e.thirdForm,e.message),delete e.thirdForm.itemBrand,delete e.thirdForm.type,delete e.thirdForm.shopType,delete e.thirdForm.items;var t=JSON.stringify(e.thirdForm.itemValueList);console.log(t);var i=new XMLHttpRequest;i.open("POST","http://47.93.48.111:8080/api/item/updateItemValue"),i.setRequestHeader("Content-Type","application/json"),i.send(t),i.onreadystatechange=function(){"SUCCEED"==JSON.parse(i.response).callStatus?(delete e.thirdForm.itemValueList,a.a.axiosPostReq("/item/update",e.thirdForm).then(function(t){"SUCCEED"===t.data.callStatus?(console.log(t,"修改商品成功！"),e.$message("修改商品成功！"),window.sessionStorage.removeItem("editCargo"),e.$router.push({name:"商品信息管理",params:{list:!0,addMerchandise:!1}})):e.$message.error("网络出错，请稍后再试！")})):e.$message.error("保存失败！")}}},returnSecond:function(){var e=this;e.thirdStep=!1,e.$emit("listenToSecond",e.thirdStep)}},components:{}}},574:function(e,t,i){t=e.exports=i(347)(!0),t.push([e.i,".firstTitle[data-v-64668d87]{margin-top:15px;margin-bottom:15px;font-size:15px;padding-bottom:10px;border-bottom:1px solid #e9e9e9}.secondTitle[data-v-64668d87],.thirdTitle[data-v-64668d87]{margin-top:50px;margin-bottom:15px;font-size:15px;padding-bottom:10px;border-bottom:1px solid #e9e9e9}.fouthTitle[data-v-64668d87],.selectTv[data-v-64668d87]{float:left;margin-top:50px}#editor-container[data-v-64668d87]{height:375px}.avatar-uploader .el-upload[data-v-64668d87]{border:1px dashed #d9d9d9;border-radius:6px;cursor:pointer;position:relative;overflow:hidden}.avatar-uploader .el-upload[data-v-64668d87]:hover{border-color:#20a0ff}.avatar-uploader-icon[data-v-64668d87]{font-size:28px;color:#8c939d;width:178px;height:178px;line-height:178px;text-align:center;background:#eaeaea}.avatar[data-v-64668d87]{width:178px;height:178px;display:block}","",{version:3,sources:["/Users/daifeili/yayi-web/src/components/admin/merchantMessage/thirdStep.vue"],names:[],mappings:"AACA,6BACE,gBAAiB,AACjB,mBAAoB,AACpB,eAAgB,AAChB,oBAAqB,AACrB,+BAAiC,CAClC,AACD,2DACE,gBAAiB,AACjB,mBAAoB,AACpB,eAAgB,AAChB,oBAAqB,AACrB,+BAAiC,CAClC,AAKD,wDAHE,WAAY,AACZ,eAAiB,CAKlB,AAGD,mCACE,YAAc,CACf,AACD,6CACE,0BAA2B,AAC3B,kBAAmB,AACnB,eAAgB,AAChB,kBAAmB,AACnB,eAAiB,CAClB,AACD,mDACE,oBAAsB,CACvB,AACD,uCACE,eAAgB,AAChB,cAAe,AACf,YAAa,AACb,aAAc,AACd,kBAAmB,AACnB,kBAAmB,AACnB,kBAAoB,CACrB,AACD,yBACE,YAAa,AACb,aAAc,AACd,aAAe,CAChB",file:"thirdStep.vue",sourcesContent:["\n.firstTitle[data-v-64668d87] {\n  margin-top: 15px;\n  margin-bottom: 15px;\n  font-size: 15px;\n  padding-bottom: 10px;\n  border-bottom: 1px solid #e9e9e9;\n}\n.secondTitle[data-v-64668d87],.thirdTitle[data-v-64668d87]{\n  margin-top: 50px;\n  margin-bottom: 15px;\n  font-size: 15px;\n  padding-bottom: 10px;\n  border-bottom: 1px solid #e9e9e9;\n}\n.fouthTitle[data-v-64668d87] {\n  float: left;\n  margin-top: 50px;\n}\n.selectTv[data-v-64668d87] {\n  float: left;\n  margin-top: 50px;\n}\n.upload-demo[data-v-64668d87] {\n}\n#editor-container[data-v-64668d87] {\n  height: 375px;\n}\n.avatar-uploader .el-upload[data-v-64668d87] {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n.avatar-uploader .el-upload[data-v-64668d87]:hover {\n  border-color: #20a0ff;\n}\n.avatar-uploader-icon[data-v-64668d87] {\n  font-size: 28px;\n  color: #8c939d;\n  width: 178px;\n  height: 178px;\n  line-height: 178px;\n  text-align: center;\n  background: #eaeaea;\n}\n.avatar[data-v-64668d87] {\n  width: 178px;\n  height: 178px;\n  display: block;\n}\n"],sourceRoot:""}])},599:function(e,t,i){t=e.exports=i(347)(!0),t.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"secondStep.vue",sourceRoot:""}])},701:function(e,t,i){var a=i(574);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(348)("23bdc03e",a,!0)},726:function(e,t,i){var a=i(599);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);i(348)("2d72684a",a,!0)},749:function(e,t,i){function a(e){i(701)}var o=i(4)(i(479),i(818),a,"data-v-64668d87",null);e.exports=o.exports},818:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"show",rawName:"v-show",value:e.thirdStep,expression:"thirdStep"}],staticClass:"thirdStep"},[i("div",{staticClass:"firstTitle"},[e._v("商品图片：(最多5个)")]),e._v(" "),i("el-upload",{staticClass:"upload-demo",attrs:{"on-remove":e.handleRemove,"on-success":e.uploadFile,data:e.qiNiuToken,action:e.qiNiuUrl,"file-list":e.fileList2,"list-type":"picture"}},[i("el-button",{attrs:{size:"small",type:"primary"}},[e._v("添加图片")]),e._v(" "),i("div",{staticClass:"el-upload__tip",slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])],1),e._v(" "),i("div",{staticClass:"clearfix"}),e._v(" "),i("div",{staticClass:"second_box"},[i("div",{staticClass:"secondTitle"},[e._v("商品详情：")]),e._v(" "),i("div",{attrs:{id:"toolbar1"}},[e._m(0),e._v(" "),i("button",{staticClass:"ql-bold"}),e._v(" "),i("button",{staticClass:"ql-italic"}),e._v(" "),i("button",{staticClass:"ql-script",attrs:{value:"sub"}}),e._v(" "),i("button",{staticClass:"ql-script",attrs:{value:"super"}}),e._v(" "),i("button",{staticClass:"ql-Image",on:{click:e.uploaImage}},[e._v("image")])]),e._v(" "),i("div",{staticStyle:{height:"500px"},attrs:{id:"editor1"}})]),e._v(" "),i("div",{staticClass:"third_box"},[i("div",{staticClass:"thirdTitle"},[e._v("图片说明：")]),e._v(" "),i("div",{attrs:{id:"toolbar2"}},[e._m(1),e._v(" "),i("button",{staticClass:"ql-bold"}),e._v(" "),i("button",{staticClass:"ql-italic"}),e._v(" "),i("button",{staticClass:"ql-script",attrs:{value:"sub"}}),e._v(" "),i("button",{staticClass:"ql-script",attrs:{value:"super"}}),e._v(" "),i("button",{staticClass:"ql-Image",on:{click:e.uploaImage1}},[e._v("image")])]),e._v(" "),i("div",{staticStyle:{height:"500px"},attrs:{id:"editor2"}})]),e._v(" "),i("div",{staticClass:"fouth_box"},[i("div",{staticClass:"fouthTitle"},[e._v("视频说明：")]),e._v(" "),i("el-select",{staticClass:"selectTv",attrs:{filterable:"",placeholder:"请选择"},model:{value:e.thirdForm.video,callback:function(t){e.thirdForm.video=t},expression:"thirdForm.video"}},e._l(e.options,function(e){return i("el-option",{key:e.vidRoute,attrs:{label:e.vidName,value:e.vidRoute}})}))],1),e._v(" "),i("div",{staticClass:"clearfix"}),e._v(" "),i("div",{staticStyle:{"margin-left":"30px","margin-top":"50px"}},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.save()}}},[e._v("保存")]),e._v(" "),i("el-button",{on:{click:function(t){e.returnSecond()}}},[e._v("返回")])],1),e._v(" "),i("el-dialog",{attrs:{title:"上传图片",visible:e.dialogVisible,size:"small"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("el-upload",{staticClass:"avatar-uploader",attrs:{data:e.qiNiuToken,action:e.qiNiuUrl,"show-file-list":!1,"on-success":e.handleAvatarSuccess}},[e.imageUrl?i("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),e._v(" "),i("span",{staticClass:"dialog-footer",slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.insertImg}},[e._v("插入图片")])],1)],1)],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("select",{staticClass:"ql-size"},[i("option",{attrs:{value:"small"}}),e._v(" "),i("option",{attrs:{selected:""}}),e._v(" "),i("option",{attrs:{value:"large"}}),e._v(" "),i("option",{attrs:{value:"huge"}})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("select",{staticClass:"ql-size"},[i("option",{attrs:{value:"small"}}),e._v(" "),i("option",{attrs:{selected:""}}),e._v(" "),i("option",{attrs:{value:"large"}}),e._v(" "),i("option",{attrs:{value:"huge"}})])}]}},839:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"secondStep"},[i("el-form",{directives:[{name:"show",rawName:"v-show",value:e.secondStep,expression:"secondStep"}],ref:"secondForm",staticClass:"secondStep_box",staticStyle:{"margin-top":"20px"},attrs:{inline:!0,model:e.secondForm,rules:e.rules}},[i("el-form-item",{attrs:{label:"商家货号"}},[i("el-input",{model:{value:e.secondForm.storeItemId,callback:function(t){e.secondForm.storeItemId=t},expression:"secondForm.storeItemId"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"器械类别"}},[i("el-input",{model:{value:e.secondForm.apparatusType,callback:function(t){e.secondForm.apparatusType=t},expression:"secondForm.apparatusType"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"单位"}},[i("el-input",{model:{value:e.secondForm.unit,callback:function(t){e.secondForm.unit=t},expression:"secondForm.unit"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"生产企业"}},[i("el-input",{model:{value:e.secondForm.producePompany,callback:function(t){e.secondForm.producePompany=t},expression:"secondForm.producePompany"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"注册证有效期／备案日期",prop:"registerDate"}},[i("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.secondForm.registerDate,callback:function(t){e.secondForm.registerDate=t},expression:"secondForm.registerDate"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"产品包装"}},[i("el-input",{model:{value:e.secondForm.itemPacking,callback:function(t){e.secondForm.itemPacking=t},expression:"secondForm.itemPacking"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"产品标准"}},[i("el-input",{model:{value:e.secondForm.itemLevels,callback:function(t){e.secondForm.itemLevels=t},expression:"secondForm.itemLevels"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"使用范围"}},[i("el-input",{model:{value:e.secondForm.itemRange,callback:function(t){e.secondForm.itemRange=t},expression:"secondForm.itemRange"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"其他"}},[i("el-input",{model:{value:e.secondForm.remark,callback:function(t){e.secondForm.remark=t},expression:"secondForm.remark"}})],1),e._v(" "),i("div",{staticStyle:{"margin-left":"30px"}},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.nextToThird("secondForm")}}},[e._v("下一步")]),e._v(" "),i("el-button",{on:{click:function(t){e.returnFrist()}}},[e._v("返回")])],1)],1),e._v(" "),i("thirdStep",{directives:[{name:"show",rawName:"v-show",value:e.thirdStep,expression:"thirdStep"}],attrs:{message:e.newForm},on:{listenToSecond:e.showMsgFromThirdStep}})],1)},staticRenderFns:[]}}});
//# sourceMappingURL=6.402fb54707c14fce78b1.js.map